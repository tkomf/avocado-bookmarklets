javascript:(function()%7Bfunction%20makeUrlAbsolute(base%2C%20relative)%20%7Breturn%20new%20URL(relative%2C%20base).href%3B%7Dfunction%20parseUrl(url)%20%7Breturn%20new%20URL(url).host%3B%7Dfunction%20getProvider(host)%20%7Breturn%20host.replace(%2Fwww%5Ba-zA-Z0-9%5D*%5C.%2F%2C%20'').replace('.co.'%2C%20'.').split('.').slice(0%2C%20-1).join('%20')%3B%7Dfunction%20buildRuleSet(ruleSet)%20%7Breturn%20(doc%2C%20context)%20%3D%3E%20%7Blet%20maxScore%20%3D%200%3Blet%20maxValue%3Bfor%20(let%20currRule%20%3D%200%3B%20currRule%20%3C%20ruleSet.rules.length%3B%20currRule%2B%2B)%20%7Bconst%20%5Bquery%2C%20handler%5D%20%3D%20ruleSet.rules%5BcurrRule%5D%3Bconst%20elements%20%3D%20Array.from(doc.querySelectorAll(query))%3Bif%20(elements.length)%20%7Bfor%20(const%20element%20of%20elements)%20%7Blet%20score%20%3D%20ruleSet.rules.length%20-%20currRule%3Bif%20(ruleSet.scorers)%20%7Bfor%20(const%20scorer%20of%20ruleSet.scorers)%20%7Bconst%20newScore%20%3D%20scorer(element%2C%20score)%3Bif%20(newScore)%20%7Bscore%20%3D%20newScore%3B%7D%7D%7Dif%20(score%20%3E%20maxScore)%20%7BmaxScore%20%3D%20score%3BmaxValue%20%3D%20handler(element)%3B%7D%7D%7D%7Dif%20(!maxValue%20%26%26%20ruleSet.defaultValue)%20%7BmaxValue%20%3D%20ruleSet.defaultValue(context)%3B%7Dif%20(maxValue)%20%7Bif%20(ruleSet.processors)%20%7Bfor%20(const%20processor%20of%20ruleSet.processors)%20%7BmaxValue%20%3D%20processor(maxValue%2C%20context)%3B%7D%7Dif%20(maxValue.trim)%20%7BmaxValue%20%3D%20maxValue.trim()%3B%7Dreturn%20maxValue%3B%7D%7D%3B%7Dconst%20metadataRuleSets%20%3D%20%7Bdescription%3A%20%7Brules%3A%20%5B%5B'meta%5Bproperty%3D%22og%3Adescription%22%5D'%2C%20element%20%3D%3E%20element.getAttribute('content')%5D%2C%5B'meta%5Bname%3D%22description%22%20i%5D'%2C%20element%20%3D%3E%20element.getAttribute('content')%5D%2C%5D%2C%7D%2Cimage%3A%20%7Brules%3A%20%5B%5B'meta%5Bproperty%3D%22og%3Aimage%3Asecure_url%22%5D'%2C%20element%20%3D%3E%20element.getAttribute('content')%5D%2C%5B'meta%5Bproperty%3D%22og%3Aimage%3Aurl%22%5D'%2C%20element%20%3D%3E%20element.getAttribute('content')%5D%2C%5B'meta%5Bproperty%3D%22og%3Aimage%22%5D'%2C%20element%20%3D%3E%20element.getAttribute('content')%5D%2C%5B'meta%5Bname%3D%22twitter%3Aimage%22%5D'%2C%20element%20%3D%3E%20element.getAttribute('content')%5D%2C%5B'meta%5Bproperty%3D%22twitter%3Aimage%22%5D'%2C%20element%20%3D%3E%20element.getAttribute('content')%5D%2C%5B'meta%5Bname%3D%22thumbnail%22%5D'%2C%20element%20%3D%3E%20element.getAttribute('content')%5D%2C%5D%2Cprocessors%3A%20%5B(image_url%2C%20context)%20%3D%3E%20makeUrlAbsolute(context.url%2C%20image_url)%5D%2C%7D%2Ctitle%3A%20%7Brules%3A%20%5B%5B'meta%5Bproperty%3D%22og%3Atitle%22%5D'%2C%20element%20%3D%3E%20element.getAttribute('content')%5D%2C%5B'meta%5Bname%3D%22twitter%3Atitle%22%5D'%2C%20element%20%3D%3E%20element.getAttribute('content')%5D%2C%5B'meta%5Bproperty%3D%22twitter%3Atitle%22%5D'%2C%20element%20%3D%3E%20element.getAttribute('content')%5D%2C%5B'meta%5Bname%3D%22hdl%22%5D'%2C%20element%20%3D%3E%20element.getAttribute('content')%5D%2C%5B'title'%2C%20element%20%3D%3E%20element.text%5D%2C%5D%2C%7D%2Curl%3A%20%7Brules%3A%20%5B%5B'link%5Brel%3D%22canonical%22%5D'%2C%20element%20%3D%3E%20element.getAttribute('href')%5D%2C%5B'meta%5Bproperty%3D%22og%3Aurl%22%5D'%2C%20element%20%3D%3E%20element.getAttribute('content')%5D%2C%5D%2CdefaultValue%3A%20(context)%20%3D%3E%20context.url%2Cprocessors%3A%20%5B(url%2C%20context)%20%3D%3E%20makeUrlAbsolute(context.url%2C%20url)%5D%7D%2Cprovider%3A%20%7Brules%3A%20%5B%5B'meta%5Bproperty%3D%22og%3Asite_name%22%5D'%2C%20element%20%3D%3E%20element.getAttribute('content')%5D%2C%5B'meta%5Bproperty%3D%22twitter%3Asite%22%5D'%2C%20element%20%3D%3E%20element.getAttribute('content')%5D%2C%5D%2CdefaultValue%3A%20(context)%20%3D%3E%20getProvider(parseUrl(context.url))%7D%2C%7D%3Bfunction%20getMetadata(doc%2C%20url)%20%7Bconst%20metadata%20%3D%20%7B%7D%3Bconst%20context%20%3D%20%7Burl%2C%7D%3BObject.keys(metadataRuleSets).map(ruleSetKey%20%3D%3E%20%7Bconst%20ruleSet%20%3D%20metadataRuleSets%5BruleSetKey%5D%3Bconst%20builtRuleSet%20%3D%20buildRuleSet(ruleSet)%3Bmetadata%5BruleSetKey%5D%20%3D%20builtRuleSet(doc%2C%20context)%3B%7D)%3Breturn%20metadata%3B%7Dfunction%20formatMetadata(doc%2C%20url)%20%7Blet%20metadata%20%3D%20getMetadata(doc%2C%20url)%3Blet%20selectedText%20%3D%20window.getSelection().toString()%3Blet%20formattedLink%20%3D%20%60%3Cb%3E%24%7Bmetadata.provider%7D%3A%20%3Ca%20href%3D%22%24%7Bmetadata.url%7D%22%3E%24%7Bmetadata.title%7D%3C%2Fa%3E%3C%2Fb%3E%5Cn%3Ci%3E%22%24%7Bmetadata.description%7D%22%3C%2Fi%3E%60%3Bif%20(selectedText.length)%20%7BformattedLink%20%2B%3D%20%60%5Cn%3Cblockquote%3E%24%7BselectedText%7D%3C%2Fblockquote%3E%60%3B%7Dreturn%20formattedLink%3B%7Dfunction%20copy(text)%20%7Bvar%20node%20%3D%20document.createElement('textarea')%3Bvar%20selection%20%3D%20document.getSelection()%3Bnode.textContent%20%3D%20text%3Bdocument.body.appendChild(node)%3Bselection.removeAllRanges()%3Bnode.select()%3Bdocument.execCommand('copy')%3Bselection.removeAllRanges()%3Bdocument.body.removeChild(node)%3B%7Dcopy(formatMetadata(document%2C%20document.location.href))%7D)()
